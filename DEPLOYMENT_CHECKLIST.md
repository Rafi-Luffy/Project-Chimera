# Pre-Deployment Checklist

Use this checklist before deploying to Render.

## Code Changes

- [x] Updated App.tsx to use `import.meta.env.VITE_BACKEND_URL`
- [x] Updated Login.tsx to use `import.meta.env.VITE_BACKEND_URL`
- [x] Added authentication dependencies to requirements.txt
- [x] Updated render.yaml with correct environment variables
- [x] Removed unnecessary Supabase/Neo4j references

## Files to Verify

### Backend Files
```
backend/
├── main_agents.py ✓
├── auth.py ✓
├── database.py ✓
└── agents/ ✓
```

### Frontend Files
```
frontend-react/
├── src/
│   ├── App.tsx ✓ (uses VITE_BACKEND_URL)
│   └── components/
│       └── Login.tsx ✓ (uses VITE_BACKEND_URL)
├── package.json ✓
└── vite.config.ts ✓
```

### Root Files
```
├── requirements.txt ✓ (includes all dependencies)
├── render.yaml ✓ (configured for Render)
└── scripts/SB_publication_PMC.csv ✓ (publication data)
```

## Environment Variables Needed

### Backend
- `GOOGLE_API_KEY` - Get from https://aistudio.google.com/apikey
- `JWT_SECRET_KEY` - Auto-generated by Render
- `JWT_ALGORITHM` - Set to "HS256"

### Frontend
- `VITE_BACKEND_URL` - Set to your backend URL (auto-configured in render.yaml)

## Deployment Steps

1. **Commit all changes:**
   ```bash
   git add -A
   git commit -m "Prepare for Render deployment"
   git push origin master
   ```

2. **Go to Render:**
   - Visit https://render.com
   - Click "New +" → "Blueprint"
   - Select Project Chimera repository
   
3. **Configure Environment Variables:**
   - Add GOOGLE_API_KEY to backend service
   - Verify VITE_BACKEND_URL in frontend service

4. **Deploy:**
   - Click "Apply"
   - Wait for build (5-10 minutes total)

5. **Initialize Backend:**
   ```bash
   curl -X POST https://chimera-backend-api.onrender.com/initialize
   ```

6. **Test Frontend:**
   - Open https://chimera-frontend.onrender.com
   - Try a query
   - Test authentication

## Quick Test Commands

```bash
# Health check
curl https://chimera-backend-api.onrender.com/health

# Initialize
curl -X POST https://chimera-backend-api.onrender.com/initialize

# Stats
curl https://chimera-backend-api.onrender.com/stats

# Test query
curl -X POST https://chimera-backend-api.onrender.com/query \
  -H "Content-Type: application/json" \
  -d '{"question": "What are the effects of microgravity?", "persona": "Research Scientist"}'
```

## Common Issues

### Backend won't start
- Check GOOGLE_API_KEY is set
- Check Render logs for errors
- Verify Python version (3.11.9)

### Frontend shows "Failed to fetch"
- Verify VITE_BACKEND_URL is correct
- Check CORS settings in backend
- Hard refresh browser (Cmd+Shift+R)

### Database not initialized
- Call `/initialize` endpoint
- Check if CSV file exists
- Review backend logs

## Success Criteria

- [ ] Backend health endpoint returns 200
- [ ] Frontend loads without errors
- [ ] Can register new account
- [ ] Can login with credentials
- [ ] Can submit query and get results
- [ ] Publication count displays correctly
- [ ] Chatbot responds to questions

---

**Ready to deploy?** Follow the full guide in RENDER_DEPLOYMENT_GUIDE.md
